{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"TS2 Extender Hi! Welcome to the TS2 Extender documentation :) This site aims to document the new scripting APIs and capabilities introduced into The Sims 2 Legacy with TS2 Extender, while also providing useful examples and reference for vanilla scripting.","title":"Home"},{"location":"#ts2-extender","text":"Hi! Welcome to the TS2 Extender documentation :) This site aims to document the new scripting APIs and capabilities introduced into The Sims 2 Legacy with TS2 Extender, while also providing useful examples and reference for vanilla scripting.","title":"TS2 Extender"},{"location":"extenderapi/","text":"TS2 Extender Lua API Take a look around to see which new features TS2 Extender adds into Sims 2's Lua engine.","title":"Index"},{"location":"extenderapi/#ts2-extender-lua-api","text":"Take a look around to see which new features TS2 Extender adds into Sims 2's Lua engine.","title":"TS2 Extender Lua API"},{"location":"extenderapi/Delegates/","text":"Delegates Delegates are basically game events you can listen to to run your own custom code. For example, you can listen for the game building the pie menu to inject custom interactions. You can use delegates via the AddGameCallback method. Delegates.OnBuildPieMenu(interactions, sim, object, clicked, debug) Fired when the game builds a user-directed interaction menu. Happens when hovering and clicking over objects. Parameters interactions : ( InteractionList ) List of interactions. sim : (number) Object ID of the sim building the pie menu. object : (number) Object ID of the target object. clicked : (boolean) Whether the pie menu is being built because the player has clicked on the object. If False, then we're just hovering the mouse on it. debug : (boolean) Whether the player is shift clicking with testingcheatsenabled.","title":"Delegates"},{"location":"extenderapi/Delegates/#delegates","text":"Delegates are basically game events you can listen to to run your own custom code. For example, you can listen for the game building the pie menu to inject custom interactions. You can use delegates via the AddGameCallback method.","title":"Delegates"},{"location":"extenderapi/Delegates/#delegatesonbuildpiemenuinteractions-sim-object-clicked-debug","text":"Fired when the game builds a user-directed interaction menu. Happens when hovering and clicking over objects.","title":"Delegates.OnBuildPieMenu(interactions, sim, object, clicked, debug)"},{"location":"extenderapi/Delegates/#parameters","text":"interactions : ( InteractionList ) List of interactions. sim : (number) Object ID of the sim building the pie menu. object : (number) Object ID of the target object. clicked : (boolean) Whether the pie menu is being built because the player has clicked on the object. If False, then we're just hovering the mouse on it. debug : (boolean) Whether the player is shift clicking with testingcheatsenabled.","title":"Parameters"},{"location":"extenderapi/Globals/","text":"Globals These are the new globals that are introduced with TS2 Extender. Fields TS2Extender (boolean) Set to True. This is simply to allow you to check if Extender is installed. Usage: if TS2Extender ~= nil then -- Extender is installed. Do stuff! end Methods GetExecutableDirectory() Returns the directory path that the game executable is located in. Returns path : (string) Path to directory. GetUserDirectory() Returns the directory path that the user data is located in. e.g. \"Documents/EA Games/The Sims 2 Legacy\" . Returns path : (string) Path to directory. RegisterCheat(name, description, callback) Registers a new cheat for the in-game Ctrl+Shift+C console. Parameters name : (string) The name of the cheat. description : (string) Cheat description as shown by the help cheat. callback : (function) The Lua function that will run when the cheat is called. Arguments are automatically passed from player input. Usage: RegisterCheat(\"Test\", \"Test cheat! Writes a custom string into a TNS. Usage: Test (string)\", function(str) nUI.ShowTextNotification(1,str) end) GetTS2ExtenderVersion() Simply returns the current version of TS2 Extender, as a string. Returns version : (string) Version string. GetUserInput() Returns what the player typed into the last text entry dialog (called via BHAV Dialog prim), which on an unmodded game goes unused. Returns input : (string) Player text input. OverrideString(originalIndex, originalId, originalGroup, newIndex, newId, newGroup) Overrides a string with another. Parameters originalIndex : (number) Index of the string in the STR#. Beginning from 1. originalId : (number) Instance ID of the STR# to override. originalGroup : (number) Group ID of the STR# to override. newIndex : (number) Index of the new string in the STR#. Beginning from 1. newId : (number) Instance ID of the new STR#. newGroup : (number) Group ID of the new STR#. ClearStringOverride(originalIndex, originalId, originalGroup) Clears a previously overriden string. Parameters originalIndex : (number) Index of the replaced string in the STR#. Beginning from 1. originalId : (number) Instance ID of the replaced STR#. originalGroup : (number) Group ID of the replaced STR#. OverrideUI(originalId, newId) Overrides a UIScript resource with another. Parameters originalId : (number) Instance ID of the UIScript to replace. newId : (number) Instance ID of the new UIScript to use. ClearUIOverride(originalId) Restores a previously replaced UIScript. Parameters originalId : (number) Instance ID of the UIScript to restore. OverrideMakeMoneyString(callback) Replaces the function the game uses to generate money strings (e.g. 900000 -> $900,000) Parameters callback : (function) Lua function to use to generate money strings. Usage: OverrideMakeMoneyString(function(money) return money .. \" pennies\" end) ClearMakeMoneyStringOverride() Reverses the OverrideMakeMoneyString function, making the game generate money strings as normal. AddGameCallback(delegate, callback, priority) Adds a callback that will run a custom Lua function when an event fires. Parameters delegate : ( Delegates ) Delegate or event to listen to. callback : (function) Lua function to run when the delegate is fired. priority : (number) Number specifying the order the callback should run at. Higher values mean the callback will run after lower priority ones. Returns id : (string) Unique ID of the callback, for future removal. Usage: -- create a callback that will disable all interactions. local clearInteractionsCallback = AddGameCallback(Delegates.OnBuildPieMenu, function(interactions, sim, object, clicked, debug) interactions:Clear() end) -- ..later remove it. RemoveGameCallback(Delegates.OnBuildPieMenu, clearInteractionsCallback) RemoveGameCallback(delegate, callbackId) Removes a callback previously added with AddGameCallback Parameters delegate : (number) Delegate or event to listen to. callbackId : (string) Unique ID of the callback to remove. EnsureDirectory(path) Creates all directories in a path if they don't exist. Parameters path : (string) GetFilesInDirectory(path, extension) Recursively returns all files in a path. Parameters path : (string) Path to the directory. extension : (string) Extension filter (e.g. \".lua\"). Pass \"\" to allow any extension. Returns files : (table) Table array with paths to all found files. ReadFile(path) Reads a file Parameters path : (string) Path to the file to read. Returns fileContents : (string) The contents of the file in a string. WriteFile(path, contents) Writes contents into a file. Parameters path : (string) Path to the file to write. contents : (string) Contents to write into the file. PackString(str) Packs a string into an array of shorts, for storage in TS2. Parameters str : (string) String to pack. Returns str : (table) Table array with the string encoded as short numbers. UnpackString(data) Unpacks an array of short numbers into a string. Parameters data : (table) Array of short numbers to unpack. Returns str : (string) Result string from unpacked array.","title":"Globals"},{"location":"extenderapi/Globals/#globals","text":"These are the new globals that are introduced with TS2 Extender.","title":"Globals"},{"location":"extenderapi/Globals/#fields","text":"","title":"Fields"},{"location":"extenderapi/Globals/#ts2extender","text":"(boolean) Set to True. This is simply to allow you to check if Extender is installed.","title":"TS2Extender"},{"location":"extenderapi/Globals/#usage","text":"if TS2Extender ~= nil then -- Extender is installed. Do stuff! end","title":"Usage:"},{"location":"extenderapi/Globals/#methods","text":"","title":"Methods"},{"location":"extenderapi/Globals/#getexecutabledirectory","text":"Returns the directory path that the game executable is located in.","title":"GetExecutableDirectory()"},{"location":"extenderapi/Globals/#returns","text":"path : (string) Path to directory.","title":"Returns"},{"location":"extenderapi/Globals/#getuserdirectory","text":"Returns the directory path that the user data is located in. e.g. \"Documents/EA Games/The Sims 2 Legacy\" .","title":"GetUserDirectory()"},{"location":"extenderapi/Globals/#returns_1","text":"path : (string) Path to directory.","title":"Returns"},{"location":"extenderapi/Globals/#registercheatname-description-callback","text":"Registers a new cheat for the in-game Ctrl+Shift+C console.","title":"RegisterCheat(name, description, callback)"},{"location":"extenderapi/Globals/#parameters","text":"name : (string) The name of the cheat. description : (string) Cheat description as shown by the help cheat. callback : (function) The Lua function that will run when the cheat is called. Arguments are automatically passed from player input.","title":"Parameters"},{"location":"extenderapi/Globals/#usage_1","text":"RegisterCheat(\"Test\", \"Test cheat! Writes a custom string into a TNS. Usage: Test (string)\", function(str) nUI.ShowTextNotification(1,str) end)","title":"Usage:"},{"location":"extenderapi/Globals/#getts2extenderversion","text":"Simply returns the current version of TS2 Extender, as a string.","title":"GetTS2ExtenderVersion()"},{"location":"extenderapi/Globals/#returns_2","text":"version : (string) Version string.","title":"Returns"},{"location":"extenderapi/Globals/#getuserinput","text":"Returns what the player typed into the last text entry dialog (called via BHAV Dialog prim), which on an unmodded game goes unused.","title":"GetUserInput()"},{"location":"extenderapi/Globals/#returns_3","text":"input : (string) Player text input.","title":"Returns"},{"location":"extenderapi/Globals/#overridestringoriginalindex-originalid-originalgroup-newindex-newid-newgroup","text":"Overrides a string with another.","title":"OverrideString(originalIndex, originalId, originalGroup, newIndex, newId, newGroup)"},{"location":"extenderapi/Globals/#parameters_1","text":"originalIndex : (number) Index of the string in the STR#. Beginning from 1. originalId : (number) Instance ID of the STR# to override. originalGroup : (number) Group ID of the STR# to override. newIndex : (number) Index of the new string in the STR#. Beginning from 1. newId : (number) Instance ID of the new STR#. newGroup : (number) Group ID of the new STR#.","title":"Parameters"},{"location":"extenderapi/Globals/#clearstringoverrideoriginalindex-originalid-originalgroup","text":"Clears a previously overriden string.","title":"ClearStringOverride(originalIndex, originalId, originalGroup)"},{"location":"extenderapi/Globals/#parameters_2","text":"originalIndex : (number) Index of the replaced string in the STR#. Beginning from 1. originalId : (number) Instance ID of the replaced STR#. originalGroup : (number) Group ID of the replaced STR#.","title":"Parameters"},{"location":"extenderapi/Globals/#overrideuioriginalid-newid","text":"Overrides a UIScript resource with another.","title":"OverrideUI(originalId, newId)"},{"location":"extenderapi/Globals/#parameters_3","text":"originalId : (number) Instance ID of the UIScript to replace. newId : (number) Instance ID of the new UIScript to use.","title":"Parameters"},{"location":"extenderapi/Globals/#clearuioverrideoriginalid","text":"Restores a previously replaced UIScript.","title":"ClearUIOverride(originalId)"},{"location":"extenderapi/Globals/#parameters_4","text":"originalId : (number) Instance ID of the UIScript to restore.","title":"Parameters"},{"location":"extenderapi/Globals/#overridemakemoneystringcallback","text":"Replaces the function the game uses to generate money strings (e.g. 900000 -> $900,000)","title":"OverrideMakeMoneyString(callback)"},{"location":"extenderapi/Globals/#parameters_5","text":"callback : (function) Lua function to use to generate money strings.","title":"Parameters"},{"location":"extenderapi/Globals/#usage_2","text":"OverrideMakeMoneyString(function(money) return money .. \" pennies\" end)","title":"Usage:"},{"location":"extenderapi/Globals/#clearmakemoneystringoverride","text":"Reverses the OverrideMakeMoneyString function, making the game generate money strings as normal.","title":"ClearMakeMoneyStringOverride()"},{"location":"extenderapi/Globals/#addgamecallbackdelegate-callback-priority","text":"Adds a callback that will run a custom Lua function when an event fires.","title":"AddGameCallback(delegate, callback, priority)"},{"location":"extenderapi/Globals/#parameters_6","text":"delegate : ( Delegates ) Delegate or event to listen to. callback : (function) Lua function to run when the delegate is fired. priority : (number) Number specifying the order the callback should run at. Higher values mean the callback will run after lower priority ones.","title":"Parameters"},{"location":"extenderapi/Globals/#returns_4","text":"id : (string) Unique ID of the callback, for future removal.","title":"Returns"},{"location":"extenderapi/Globals/#usage_3","text":"-- create a callback that will disable all interactions. local clearInteractionsCallback = AddGameCallback(Delegates.OnBuildPieMenu, function(interactions, sim, object, clicked, debug) interactions:Clear() end) -- ..later remove it. RemoveGameCallback(Delegates.OnBuildPieMenu, clearInteractionsCallback)","title":"Usage:"},{"location":"extenderapi/Globals/#removegamecallbackdelegate-callbackid","text":"Removes a callback previously added with AddGameCallback","title":"RemoveGameCallback(delegate, callbackId)"},{"location":"extenderapi/Globals/#parameters_7","text":"delegate : (number) Delegate or event to listen to. callbackId : (string) Unique ID of the callback to remove.","title":"Parameters"},{"location":"extenderapi/Globals/#ensuredirectorypath","text":"Creates all directories in a path if they don't exist.","title":"EnsureDirectory(path)"},{"location":"extenderapi/Globals/#parameters_8","text":"path : (string)","title":"Parameters"},{"location":"extenderapi/Globals/#getfilesindirectorypath-extension","text":"Recursively returns all files in a path.","title":"GetFilesInDirectory(path, extension)"},{"location":"extenderapi/Globals/#parameters_9","text":"path : (string) Path to the directory. extension : (string) Extension filter (e.g. \".lua\"). Pass \"\" to allow any extension.","title":"Parameters"},{"location":"extenderapi/Globals/#returns_5","text":"files : (table) Table array with paths to all found files.","title":"Returns"},{"location":"extenderapi/Globals/#readfilepath","text":"Reads a file","title":"ReadFile(path)"},{"location":"extenderapi/Globals/#parameters_10","text":"path : (string) Path to the file to read.","title":"Parameters"},{"location":"extenderapi/Globals/#returns_6","text":"fileContents : (string) The contents of the file in a string.","title":"Returns"},{"location":"extenderapi/Globals/#writefilepath-contents","text":"Writes contents into a file.","title":"WriteFile(path, contents)"},{"location":"extenderapi/Globals/#parameters_11","text":"path : (string) Path to the file to write. contents : (string) Contents to write into the file.","title":"Parameters"},{"location":"extenderapi/Globals/#packstringstr","text":"Packs a string into an array of shorts, for storage in TS2.","title":"PackString(str)"},{"location":"extenderapi/Globals/#parameters_12","text":"str : (string) String to pack.","title":"Parameters"},{"location":"extenderapi/Globals/#returns_7","text":"str : (table) Table array with the string encoded as short numbers.","title":"Returns"},{"location":"extenderapi/Globals/#unpackstringdata","text":"Unpacks an array of short numbers into a string.","title":"UnpackString(data)"},{"location":"extenderapi/Globals/#parameters_13","text":"data : (table) Array of short numbers to unpack.","title":"Parameters"},{"location":"extenderapi/Globals/#returns_8","text":"str : (string) Result string from unpacked array.","title":"Returns"},{"location":"extenderapi/Classes/DataReader/","text":"DataReader The DataReader class allows you to read a sequence of shorts. Similar to something like BinaryReader in C#. Methods DataReader.new() Constructs a DataReader instance. Returns datareader : (DataReader) DataReader.FromToken(token) Constructs a DataReader instance, with the contents from a Sims 2 token. Parameters token : (token) Token to pull data from. Returns datareader : (DataReader) DataReader:Read() Reads a number from the current position in the stream, and advances the position. Returns value : (number) Number that was read. DataReader:ReadString() Reads and unpacks a packed string from the stream. Returns value : (string) String that was read. Fields DataReader.index (number) Current location in the stream. DataReader.data (table) Array with the data in the stream.","title":"DataReader"},{"location":"extenderapi/Classes/DataReader/#datareader","text":"The DataReader class allows you to read a sequence of shorts. Similar to something like BinaryReader in C#.","title":"DataReader"},{"location":"extenderapi/Classes/DataReader/#methods","text":"","title":"Methods"},{"location":"extenderapi/Classes/DataReader/#datareadernew","text":"Constructs a DataReader instance.","title":"DataReader.new()"},{"location":"extenderapi/Classes/DataReader/#returns","text":"datareader : (DataReader)","title":"Returns"},{"location":"extenderapi/Classes/DataReader/#datareaderfromtokentoken","text":"Constructs a DataReader instance, with the contents from a Sims 2 token.","title":"DataReader.FromToken(token)"},{"location":"extenderapi/Classes/DataReader/#parameters","text":"token : (token) Token to pull data from.","title":"Parameters"},{"location":"extenderapi/Classes/DataReader/#returns_1","text":"datareader : (DataReader)","title":"Returns"},{"location":"extenderapi/Classes/DataReader/#datareaderread","text":"Reads a number from the current position in the stream, and advances the position.","title":"DataReader:Read()"},{"location":"extenderapi/Classes/DataReader/#returns_2","text":"value : (number) Number that was read.","title":"Returns"},{"location":"extenderapi/Classes/DataReader/#datareaderreadstring","text":"Reads and unpacks a packed string from the stream.","title":"DataReader:ReadString()"},{"location":"extenderapi/Classes/DataReader/#returns_3","text":"value : (string) String that was read.","title":"Returns"},{"location":"extenderapi/Classes/DataReader/#fields","text":"","title":"Fields"},{"location":"extenderapi/Classes/DataReader/#datareaderindex","text":"(number) Current location in the stream.","title":"DataReader.index"},{"location":"extenderapi/Classes/DataReader/#datareaderdata","text":"(table) Array with the data in the stream.","title":"DataReader.data"},{"location":"extenderapi/Classes/DataWriter/","text":"DataWriter The DataWriter class allows you to write a sequence of shorts. Similar to something like BinaryWriter in C#. Methods DataWriter.new() Constructs a DataWriter instance. Returns datawriter : (DataWriter) DataWriter:Write(value) Writes a number into the stream. Parameters value : (number) Number to write. DataWriter:WriteString(str) Packs and writes a string into the stream, as shorts. Parameters str : (string) String to write. DataWriter:ApplyToToken(token) Copies the contents of the stream into a Sims 2 token, replacing the original properties in the token. Parameters token : (token) Token to write into. Fields DataWriter.index (number) Current location in the stream. DataWriter.data (table) Array with all data written so far.","title":"DataWriter"},{"location":"extenderapi/Classes/DataWriter/#datawriter","text":"The DataWriter class allows you to write a sequence of shorts. Similar to something like BinaryWriter in C#.","title":"DataWriter"},{"location":"extenderapi/Classes/DataWriter/#methods","text":"","title":"Methods"},{"location":"extenderapi/Classes/DataWriter/#datawriternew","text":"Constructs a DataWriter instance.","title":"DataWriter.new()"},{"location":"extenderapi/Classes/DataWriter/#returns","text":"datawriter : (DataWriter)","title":"Returns"},{"location":"extenderapi/Classes/DataWriter/#datawriterwritevalue","text":"Writes a number into the stream.","title":"DataWriter:Write(value)"},{"location":"extenderapi/Classes/DataWriter/#parameters","text":"value : (number) Number to write.","title":"Parameters"},{"location":"extenderapi/Classes/DataWriter/#datawriterwritestringstr","text":"Packs and writes a string into the stream, as shorts.","title":"DataWriter:WriteString(str)"},{"location":"extenderapi/Classes/DataWriter/#parameters_1","text":"str : (string) String to write.","title":"Parameters"},{"location":"extenderapi/Classes/DataWriter/#datawriterapplytotokentoken","text":"Copies the contents of the stream into a Sims 2 token, replacing the original properties in the token.","title":"DataWriter:ApplyToToken(token)"},{"location":"extenderapi/Classes/DataWriter/#parameters_2","text":"token : (token) Token to write into.","title":"Parameters"},{"location":"extenderapi/Classes/DataWriter/#fields","text":"","title":"Fields"},{"location":"extenderapi/Classes/DataWriter/#datawriterindex","text":"(number) Current location in the stream.","title":"DataWriter.index"},{"location":"extenderapi/Classes/DataWriter/#datawriterdata","text":"(table) Array with all data written so far.","title":"DataWriter.data"},{"location":"extenderapi/Classes/InteractionList/","text":"InteractionList The InteractionList class represents the interactions available in a Sim's pie menu. They can be retrieved via the OnBuildPieMenu delegate. Methods InteractionList:Clear() Removes all interactions from the pie menu. InteractionList:AddInteraction(id, objectId, blocking, name, param0, param1, param2, param3) Adds a new interaction to the current pie menu being built. Parameters id : (number) Instance ID of the interaction BHAV. e.g. 0x0000 and above for global scope, 0x1000 and above for private scope, 0x2000 and above for semi-global scope. objectId : (number) Object ID of the object to pull the interaction from. When running an interaction from a different object, that object will be used as the Stack Object, so if you're trying to inject an interaction it's recommended you pass the ID of the object you want to perform the interaction on as a param. blocking : (boolean) Can be true or false. If false, the interaction runs immediately. name : (string) Display name of the interaction. param0 : (number) Param to pass to the interaction BHAV. param1 : (number) Param to pass to the interaction BHAV. param2 : (number) Param to pass to the interaction BHAV. param3 : (number) Param to pass to the interaction BHAV.","title":"InteractionList"},{"location":"extenderapi/Classes/InteractionList/#interactionlist","text":"The InteractionList class represents the interactions available in a Sim's pie menu. They can be retrieved via the OnBuildPieMenu delegate.","title":"InteractionList"},{"location":"extenderapi/Classes/InteractionList/#methods","text":"","title":"Methods"},{"location":"extenderapi/Classes/InteractionList/#interactionlistclear","text":"Removes all interactions from the pie menu.","title":"InteractionList:Clear()"},{"location":"extenderapi/Classes/InteractionList/#interactionlistaddinteractionid-objectid-blocking-name-param0-param1-param2-param3","text":"Adds a new interaction to the current pie menu being built.","title":"InteractionList:AddInteraction(id, objectId, blocking, name, param0, param1, param2, param3)"},{"location":"extenderapi/Classes/InteractionList/#parameters","text":"id : (number) Instance ID of the interaction BHAV. e.g. 0x0000 and above for global scope, 0x1000 and above for private scope, 0x2000 and above for semi-global scope. objectId : (number) Object ID of the object to pull the interaction from. When running an interaction from a different object, that object will be used as the Stack Object, so if you're trying to inject an interaction it's recommended you pass the ID of the object you want to perform the interaction on as a param. blocking : (boolean) Can be true or false. If false, the interaction runs immediately. name : (string) Display name of the interaction. param0 : (number) Param to pass to the interaction BHAV. param1 : (number) Param to pass to the interaction BHAV. param2 : (number) Param to pass to the interaction BHAV. param3 : (number) Param to pass to the interaction BHAV.","title":"Parameters"}]}